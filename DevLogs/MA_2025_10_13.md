# 2025-10-13 MA 开发日志
## 今日进展
- 添加了自动生成迷宫墙体的脚本，但很多细节都还不够完善，比如材质和出入口还没有解决，主要实现了`GenerateMazeData(),BuildMaze()` 两个方法，以及核心迷宫生成算法`Dig()`。
```
void Dig(int x, int y)
    {
        maze[x, y] = 0;

        // 四个方向随机打乱
        int[] dirs = { 0, 1, 2, 3 };
        System.Random rand = new System.Random();
        for (int i = 0; i < dirs.Length; i++)
        {
            int j = rand.Next(i, dirs.Length);
            (dirs[i], dirs[j]) = (dirs[j], dirs[i]);//洗牌算法
        }

        foreach (int dir in dirs)
        {
            int dx = 0, dy = 0;
            switch (dir)
            {
                case 0: dx = 0; dy = 1; break;   // 上
                case 1: dx = 1; dy = 0; break;   // 右
                case 2: dx = 0; dy = -1; break;  // 下
                case 3: dx = -1; dy = 0; break;  // 左
            }

            int nx = x + dx * 2;
            int ny = y + dy * 2;

            // 判断是否越界且未挖通
            if (nx > 0 && ny > 0 && nx < width - 1 && ny < height - 1 && maze[nx, ny] == 1)
            {
                // 打通中间的墙
                maze[x + dx, y + dy] = 0;
                Dig(nx, ny);
            }
        }
    }
```
- 关键在于fisher洗牌算法

## 明日计划
- 完善迷宫地图生成
- 匹配角色与地图比例，完整实现一次游戏流程

         

 



